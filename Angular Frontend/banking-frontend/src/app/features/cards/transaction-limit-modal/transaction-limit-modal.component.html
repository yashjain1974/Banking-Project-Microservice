<div class="modal" [class.show]="true">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Update Transaction Limit</h2>
            <span class="close" (click)="onCloseModal()">&times;</span>
        </div>
        <div class="modal-body">
            <div class="account-info">
                <i class="fas fa-credit-card"></i>
                <!-- FIX: Removed optional chaining -->
                <span>Card Number: <strong id="modalCardNumber">{{ card.cardNumber | slice:0:4 }} •••• •••• {{
                        card.cardNumber | slice:-4 }}</strong></span>
            </div>

            <div class="input-group">
                <label for="newLimit">New Transaction Limit</label>
                <div class="input-wrapper">
                    <span class="currency-symbol">₹</span>
                    <input type="number" id="newLimit" name="newLimit" [(ngModel)]="newLimit"
                        placeholder="Enter new limit" min="1000" max="10000000" step="1000">
                </div>
                <div class="input-help">
                    <small>Minimum: ₹1,000 | Maximum: ₹10,00,000</small>
                </div>
            </div>

            <div class="current-limit">
                <!-- FIX: Removed optional chaining -->
                <span>Current Limit: <strong id="currentLimitDisplay">{{ card.transactionLimit |
                        currency:'INR':'symbol':'1.2-2' }}</strong></span>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-cancel" (click)="onCloseModal()">Cancel</button>
            <button class="btn btn-update" (click)="onUpdateLimit()">Update Limit</button>
        </div>
    </div>
</div>

<!-- Success Toast -->
<div class="toast" [class.show]="showToast">
    <i class="fas fa-check-circle"></i>
    <span>Transaction limit updated successfully!</span>
</div>